/* ------------------------------------------------
 * main.cpp
 *
 * Class: Program #3 for CS 141, Fall 2019
 * System: Codio
 * Author: Kevin Elliott, Andy Hansana
 *
*/
#include <iostream>
#include <string>
#include <fstream>      // For file input
#include <vector>		// For dictionary vector
#include <iomanip>		// For setw()
#include <cctype>       // For tolower()
using namespace std;


//---------------------------------------------------------------
// Display ID info 
//
void displayIdInfo()
{
    cout << " \n"
         << "Program #3: Work Play  \n"
         << "Author: Kevin Elliott, Andy Hansana      \n"
         << "Lab: Tues 9am          \n"
         << "System:  Codio         \n"
         << " \n";
}//end displayIDInfo()

//-----------------------------------------------------------------------------------------
//  You should use parameters for the dictionary, the word lengths array, 
//  the length of words to use, and the total number of words.
void readInWordsFromFile(int lengthOfWordsToUse, vector<string> &dictionary)
{
	ifstream inputFileStream;
    
    int firstIndex = 0;
    int secondIndex = 0;
    
    cout << "What length of words do you want to use?" ;
    cin >> firstIndex;
    cin >> secondIndex;
    
    int startIndex = 0;
    
    for(int i = firstIndex; i <= secondIndex; i++){
        cout << setw(5) << i << " " << dictionary[i] << endl;
    }
    cout << endl;
    }


/*    string fileName = "dictionary.txt"; // C string (array of char) to store filename
    string inputWord;				    // stores each word as it is read

	// Open input file
	inputFileStream.open( fileName.c_str() );
	    
   // Verify that the open worked
    if( !inputFileStream.is_open()) {
        cout << "Could not find input file " << fileName << "  Exiting..." << endl;
        exit( -1);
    }

	// Read all the words from the file, and display them
    while( inputFileStream >> inputWord) {
    	 if (inputWord.length() == lengthOfWordsToUse){
            for(int i = 0; i < inputWord.length(); i++){
                inputWord[i] = tolower(inputWord[i]);
            }
             dictionary.push_back(inputWord);
        }
        numOfWords[inputWord.length()]++; 
    }

    inputFileStream.close();    // Close the input file.
}
*/
//--------------------------------------------------------------------------------------
// Use binary search to look up the search word in the dictionary vector, returning
// the word's index if found, -1 otherwise.
//
long binarySearch(
            string searchWord,            // word to be looked up
            vector< string> dictionary)   // the dictionary of words
{
    long low, mid, high;     // array indices for binary search
    long searchResult = -1;  // Stores index of word if search succeeded, else -1
    
    // Binary search for word
    low = 0;
    high = dictionary.size() - 1;
    while ( low <= high)  {
        mid = (low + high) / 2;
        // SearchResult negative value means word is to the left, positive value means
        // word is to the right, value of 0 means word was found
        searchResult = searchWord.compare( dictionary[ mid] );
        if ( searchResult == 0)  {
            // Word IS in dictionary, so return the index where the word was found
            return mid;
        }
        else if (searchResult < 0)  {
            high = mid - 1; // word should be located before the mid location
        }
        else  {
            low = mid + 1; // word should be located after the mid location
        }
    }
    
    // Word was not found
    return -1;
}//end binarySearch()

void dictChecker(int lengthOfWordsToUse, vector<string> &dictionary, int numOfWords[], int &totalWords)
{
	ifstream inputFileStream;
	dictionary.clear();
	
    for(int i = 0; i < 30; i++){
        numOfWords[i] = 0;
    }
    string fileName = "dictionary.txt"; // C string (array of char) to store filename
    string inputWord;				    // stores each word as it is read

	// Open input file
	inputFileStream.open( fileName.c_str() );
	    
   // Verify that the open worked
    if( !inputFileStream.is_open()) {        
        cout << "Could not find input file " << fileName << "  Exiting..." << endl;
        exit( -1);
    }

	// Read all the words from the file, and display them
     while( inputFileStream >> inputWord) {
    	 if (inputWord.length() == lengthOfWordsToUse){
            for(int i = 0; i < inputWord.length(); i++){
                inputWord[i] = tolower(inputWord[i]);
            }
             dictionary.push_back(inputWord);
        }
        numOfWords[inputWord.length()]++; 
    }

    inputFileStream.close();    // Close the input file.
}
void printNumOfWordsTable(int numOfWords[]){
    
    cout << "Word lengths where there are more than 1400 words:" << endl;
    cout << "Length  How Many" << endl;
    cout << "------  --------" << endl;
    for (int i = 3; i < 18; i++){
        cout << i << "  " << numOfWords[i] << endl;
    }
    
}

void caseThree(vector<string> dictionary, string &startWord, string &endWord, int numberOfWords[], int lengthOfWordsToUse){
    startWord = "dog";
    endWord = "cat"; 
    int doLoopInt = 0;
    
    do{
        cout << "Enter starting word, or 'r' for a random word: " ; 
   
        cin >> startWord; 
        
        
        if (startWord == "exit")
         {
        exit(-1);
         }
        if (startWord == "r" ){
        startWord = dictionary[rand()%dictionary.size()];
        //end condition
        }
        else if(startWord.length() != lengthOfWordsToUse){
            cout<<"*** "<< startWord <<" is not of length 3. Please retry."<<endl;
            continue;
        }
        
        else if(binarySearch(startWord, dictionary) == -1){
            cout<<"***"<< startWord <<" is not in the dictionary. Please retry."<<endl;//error
            continue;
        }
   
        doLoopInt = 1;
        
 
    
    }
    while (doLoopInt == 0); 
    do{
        cout << "Enter starting word, or 'r' for a random word: " ; 
   
        cin >> endWord; 
        
        if (startWord == "exit")
        {
            exit(-1);
        }
       
     if (endWord == "r" ){
        endWord = dictionary[rand()%dictionary.size()];
     }
        
         else if(endWord.length() != lengthOfWordsToUse){
            cout<<"*** " << endWord << " is not of length 3. Please retry."<<endl;
            continue;
            
            
        }
        else if(binarySearch(endWord, dictionary) == -1){
            cout<<"*** "<< endWord <<" is not in the dictionary. Please retry."<<endl; //error
            continue;
        }
        doLoopInt = 1;
        
    
    }
    while (doLoopInt == 0); 
   
}

void wordChangeGame(int lengthOfWordsToUse, string startWord, string endWord,vector<string>dictionary)
{
    string previousWord = startWord;
    string nextWord = "";
    string currentWord = "";
    int counter = 0;
    int letterCounter = 0;
    int x = 0;
    // startWord = nextWord
     
    
    
      if (startWord ==" " && endWord== " "){
        cout<<"*** "<< startWord <<" is not of length 3. Please retry."<<endl;
      }
        //cout <<"***" << startWord << "is not in the dictionary. Please retry."<< endl;  
       
       do{
           counter++;
           cout << counter <<  ".  Previous word is '" << previousWord << "'.  Next word: ";
           cin >> nextWord;
           
           for(int i= 0; i<lengthOfWordsToUse; i++){
               
           }
        
           if(nextWord == "exit"){
               break;
           }
           
           //forLoop
           letterCounter = 0;
           for(int i = 0; i < lengthOfWordsToUse; i++){
               if(nextWord.at(i) == previousWord.at(i)){
                   letterCounter++;
               }
               
           }
           if(letterCounter != lengthOfWordsToUse - 1){
               cout << "*** " << "'" << nextWord << "'" << " must be exactly 1 character different.  Please retry." << endl;
               continue;
           }
           
           
           
           
           if(binarySearch(nextWord, dictionary) != -1){
               previousWord = nextWord;
               
            }
           else if(nextWord.length() != lengthOfWordsToUse){
            cout<<"*** "<< nextWord <<" is not of length 3. Please retry."<<endl;
            continue;
           }
               
               
               
           else if(binarySearch(nextWord, dictionary) == -1){
            cout<<"*** '" << nextWord << "' is not in the dictionary. Please retry."<<endl; //error
            continue;
            }
           // add second error for length
           if(previousWord != endWord){
               continue;
           }
           else if(previousWord == endWord){
               x = 1;
               cout <<"Congratulations, you did it!" <<endl;
               break;
           }
       
       }while(x == 0);
      
    }


void case5(vector<string>dictionary, string startWord, string endWord, int lengthOfWordsToUse){
    
    startWord = "Dog";
    //need 3 , 2 nested int he first, for loops in total, we are brute forcing every combination of letter changes and putting them into an array, no duplicates, until end word is reached
    //for every child we go from a-z. 
    //one vector changes the letter by 1 and then adds it to the vector
    
    //pushback startword into dictuonary
    //
    int sub = 0; // do string.at(x) = string.at(x) 97+ sub... ascii table plus sub equals the letter
    //dictionary.pushback(startword);
    vector <string> tempVector;
    tempVector.push_back(startWord);
        
    for(int i = 0; i < tempVector.size(); i++){
        
        for(int p = 0; p < lengthOfWordsToUse; p++){  //resets the word everytime, changes the number of letter from the first letter to the second   
            
            startWord = tempVector.at(i);
            
            tempVector.push_back(startWord);
        
        
        for(int sub = 0; sub < 25; sub++){   //changes the letter to every of the alphabet, needs to add to a vector
            startWord.at(i) = 97 + sub;
            //check duplicates
            //add to vector
            
        }
        }
    }
    
    
}
    


 
//-----------------------------------------------------------------------------------------
int main()
{
    vector< string> dictionary;    		// Vector of dictionary words read in from file
    int lengthOfWordsToUse = 3;         // Default length of word to use in word transformation
    string startWord = "dog";           // The start word for transformation
    string endWord = "cat";             // The end word for transformation
    int menuOption = -1;                // User menu option selection
    int totalWords = 0;
    int numOfWords[30] = {0};
    dictionary.clear();
    int startIndex = 0;
    int endIndex = 0; // array of size 30, each index is the number of words, index 0 is word length 1
    int startingWord = 0;
    dictChecker(lengthOfWordsToUse, dictionary, numOfWords, totalWords);
    
    printNumOfWordsTable(numOfWords);

    //readInWordsFromFile(lengthOfWordsToUse, dictionary);

    // Display ID info
    displayIdInfo();
    
    
    
    // Seed the random number generator
    srand( 1);  // Change 1 to time(0) for non-predictable results, but leave as 1 for testing

    // Menu display and handling infinite loop
    do {
      /* cout <<"Word lengths where there are more than 1400 words:
Length  How Many
------  --------
    3      1420
    4      5272
    5     10230
    6     17706
    7     23869
    8     29989
    9     32403
   10     30878
   11     26013
   12     20462
   13     14939
   14      9765
   15      5925
   16      3377
   17      1813*/
        
        
        
        cout << "Currently we have " << dictionary.size() << " words of length "
             << lengthOfWordsToUse << " in the dictionary.  \n"
             << "Changing from '" << startWord << "' to '" << endWord << "'" << endl
             << endl;
        
        cout << "Choose from the following options:  \n"
             << "   1. Change the word length        \n"
             << "   2. Display some dictionary words \n"
             << "   3. Get start and end words       \n"
             << "   4. Play the word change game     \n"
             << "   5. Find the end word with debug  \n"
             << "   6. Find the end word             \n"
             << "   7. Display an answer sequence    \n"
             << "   8. Exit the program              \n"
             << "Your choice -> ";
       cin >> menuOption;
        
        
        switch(menuOption){
            case 1:
                cout << "What length of words do you want to use? " << endl;
		cin >> lengthOfWordsToUse;
		dictChecker(lengthOfWordsToUse, dictionary, numOfWords, totalWords);  //we have numOfWords[] getting filled but we have not printed it yet
                break;
                
            case 2:
                
               readInWordsFromFile(lengthOfWordsToUse, dictionary);
             
                break;
                
            case 3:
                caseThree(dictionary,startWord,endWord,numOfWords,lengthOfWordsToUse);
                
                
                break;
            case 4:
                //wordChangeGame(dictionary,startWord,endWord);
                wordChangeGame(lengthOfWordsToUse, startWord, endWord, dictionary);
                
                break;
                
            case 5:
                cout << "Find the end word with debug " << endl;
                case5(dictionary, startWord, endWord, lengthOfWordsToUse);
                break;
                
            case 6:
                cout << "Find the end word " << endl;
                break;
                
            case 7:
                cout << "Display an answer sequence " << endl;
                break;
                
            case 8:
                exit(-1);
                break;
        }
        
    } while( true);
	
    return 0;
}//end main()
//test
